<!DOCTYPE = html>
<html lang = "ja">
	<head>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="../style.css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-url="https://yuyaokayama.github.io/BaseballOrder/" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
		<meta charset=utf-8>
		<title>BaseballOrder</title>
		<h1 class='phone_head'>俺が考えた最強の起用法<br>&nbsp;&nbsp;&nbsp;&nbsp;～投手編～</h1>
		<h1 class='head'>俺が考えた最強の起用法：投手編</h1>
		
		<nav class="head_menu">
			<li><a class="header_fielder" href="../index.html">野手版</a></li>
			<li><a class="header_pitcher" href="index.html">投手版</a></li>
			<li><a class="header_use" href="../howtouse/index.html">使い方</a></li>
		</nav>
	    <style>
	      #canvas {
	        background: white;
	      }
    	</style>    	
    </head>
    <body>
    	<div class='colorconf'>
    		<Hr Size="1">
    		<p class='title'>文字色</p>
			<form id="color">
				<input name="color" type="radio" value="white" checked="checked"> 白
				<input name="color" type="radio" value="black"> 黒
				<input name="color" type="radio" value="red"> 赤
				<input name="color" type="radio" value="blue"> 青
				<input name="color" type="radio" value="yellow"> 黄
				<input name="color" type="radio" value="orange"> 橙
				<input name="color" type="radio" value="green"> 緑
			</form>
		</div>
		<div class='colorconf'><p class='title'>背景色</p>
			<form id="bcolor">
				<input name="bcolor" type="radio" value="white"> 白
				<input name="bcolor" type="radio" value="black" checked="checked"> 黒
				<input name="bcolor" type="radio" value="red"> 赤
				<input name="bcolor" type="radio" valu&nbsp;&nbsp;e="blue"> 青
				<input name="bcolor" type="radio" value="yellow"> 黄
				<input name="bcolor" type="radio" value="orange"> 橙
				<input name="bcolor" type="radio" value="green"> 緑
			</form>
		</div>
		<tr>
		<div class='input'>
			<form class="form" name="form1" id="id_form1" action="">
			ローテーション
			<br>
    		<td align="left"><b> 1.</b></td>
    		<td><input type="text" name="1" id="starter_1" size="15" maxlength="20"></td>
    		<td><select name="hand" id="hand_1">
					<option value=""></option>
					<option value="右投">右</option>
					<option value="左投">左</option>
				</select>
			</td>
			<br>
			<td align="left"><b> 2.</b></td>
    		<td><input type="text" name="2" id="starter_2" size="15" maxlength="20"></td>
    		<td><select name="hand" id="hand_2">
					<option value=""></option>
					<option value="右投">右</option>
					<option value="左投">左</option>
				</select>
			</td>
			<br>
			<td align="left"><b> 3.</b></td>
    		<td><input type="text" name="3" id="starter_3" size="15" maxlength="20"></td>
    		<td><select name="hand" id="hand_3">
					<option value=""></option>
					<option value="右投">右</option>
					<option value="左投">左</option>
				</select>
			</td>
			<br>
			<td align="left"><b> 4.</b></td>
    		<td><input type="text" name="4" id="starter_4" size="15" maxlength="20"></td>
    		<td><select name="hand" id="hand_4">
					<option value=""></option>
					<option value="右投">右</option>
					<option value="左投">左</option>
				</select>
			</td>
			<br>
			<td align="left"><b> 5.</b></td>
    		<td><input type="text" name="5" id="starter_5" size="15" maxlength="20"></td>
    		<td><select name="hand" id="hand_5">
					<option value=""></option>
					<option value="右投">右</option>
					<option value="左投">左</option>
				</select>
			</td>
			<br>
			<td align="left"><b> 6.</b></td>
    		<td><input type="text" name="6" id="starter_6" size="15" maxlength="20"></td>
    		<td><select name="hand" id="hand_6">
					<option value=""></option>
					<option value="右投">右</option>
					<option value="左投">左</option>
				</select>
			</td>
			<br>
			勝ち継投
			<br>
    		<td align="left"><b> 7回.</b></td>
    		<td><input type="text" name="7" id="reliever_1" size="15" maxlength="20"></td>
    		<td><select name="hand" id="hand_7">
					<option value=""></option>
					<option value="右投">右</option>
					<option value="左投">左</option>
				</select>
			</td>
			<br>
			<td align="left"><b> 8回.</b></td>
    		<td><input type="text" name="8" id="reliever_2" size="15" maxlength="20"></td>
    		<td><select name="hand" id="hand_8">
					<option value=""></option>
					<option value="右投">右</option>
					<option value="左投">左</option>
				</select>
			</td>
			<br>
			<td align="left"><b> 9回.</b></td>
    		<td><input type="text" name="9" id="reliever_3" size="15" maxlength="20"></td>
    		<td><select name="hand" id="hand_9">
					<option value=""></option>
					<option value="右投">右</option>
					<option value="左投">左</option>
				</select>
			</td>
			<input type="button" value="作成" onclick="onButtonClick();" />
			</form>
		</div>
	</tr>
		<div class="img">
			<img id="newImg">
			<input type="button" value="保存" class="save_button" onclick="saveCanvas('jpeg');" />
		</div>
		<canvas id="canvas" width="320" height="480"></canvas>
		<script type="text/javascript">
			function onButtonClick() {
				var cvs = document.getElementById("canvas");
				var ctx = cvs.getContext("2d");

				var num1 = "1."
				var starter1 =document.forms.id_form1.starter_1.value;
				var hand1 = document.forms.id_form1.hand_1.value;

				var num2 = "2."
				var starter2 =document.forms.id_form1.starter_2.value;
				var hand2 = document.forms.id_form1.hand_2.value;

				var num3 = "3."
				var starter3 =document.forms.id_form1.starter_3.value;
				var hand3 = document.forms.id_form1.hand_3.value;

				var num4 = "4."
				var starter4 =document.forms.id_form1.starter_4.value;
				var hand4 = document.forms.id_form1.hand_4.value;

				var num5 = "5."
				var starter5 =document.forms.id_form1.starter_5.value;
				var hand5 = document.forms.id_form1.hand_5.value;

				var num6 = "6."
				var starter6 =document.forms.id_form1.starter_6.value;
				var hand6 = document.forms.id_form1.hand_6.value;

				var innings7 = "7回"
				var reliever1 =document.forms.id_form1.reliever_1.value;
				var hand7 = document.forms.id_form1.hand_7.value;

				var innings8 = "8回"
				var reliever2 =document.forms.id_form1.reliever_2.value;
				var hand8 = document.forms.id_form1.hand_8.value;

				var innings9 = "9回"
				var reliever3 =document.forms.id_form1.reliever_3.value;
				var hand9 = document.forms.id_form1.hand_9.value;

				var back = document.getElementById( "bcolor" ) ;
				var backgroundcolor = back.bcolor;
				var bc = backgroundcolor.value ;				

				ctx.fillStyle = bc;//背景色
				ctx.fillRect(0,0,320,480);//全体に反映

				var element = document.getElementById( "color" ) ;
				var radioNodeList = element.color;
				var fs = radioNodeList.value ;

				ctx.font = "40px Arial"; //フォントを指定
				ctx.fillStyle = fs; //塗り潰し色

				ctx.fillText(num1,10,50,100);
				ctx.strokeText(num1,10,50,100);
				ctx.fillText(starter1,100,50,100);
				ctx.strokeText(starter1,100,50,100);
				ctx.fillText(hand1,240,50,100);
				ctx.strokeText(hand1,240,50,100);

				ctx.fillText(num2,10,100,100);
				ctx.strokeText(num2,10,100,100);
				ctx.fillText(starter2,100,100,100);
				ctx.strokeText(starter2,100,100,100);
				ctx.fillText(hand2,240,100,100);
				ctx.strokeText(hand2,240,100,100);

				ctx.fillText(num3,10,150,100);
				ctx.strokeText(num3,10,150,100);
				ctx.fillText(starter3,100,150,100);
				ctx.strokeText(starter3,100,150,100);
				ctx.fillText(hand3,240,150,100);
				ctx.strokeText(hand3,240,150,100);

				ctx.fillText(num4,10,200,100);
				ctx.strokeText(num4,10,200,100);
				ctx.fillText(starter4,100,200,100);
				ctx.strokeText(starter4,100,200,100);
				ctx.fillText(hand4,240,200,100);
				ctx.strokeText(hand4,240,200,100);

				ctx.fillText(num5,10,250,100);
				ctx.strokeText(num5,10,250,100);
				ctx.fillText(starter5,100,250,100);
				ctx.strokeText(starter5,100,250,100);
				ctx.fillText(hand5,240,250,100);
				ctx.strokeText(hand5,240,250,100);

				ctx.fillText(num6,10,300,100);
				ctx.strokeText(num6,10,300,100);
				ctx.fillText(starter6,100,300,100);
				ctx.strokeText(starter6,100,300,100);
				ctx.fillText(hand6,240,300,100);
				ctx.strokeText(hand6,240,300,100);

				ctx.fillText(innings7,10,350,100);
				ctx.strokeText(innings7,10,350,100);
				ctx.fillText(reliever1,100,350,100);
				ctx.strokeText(reliever1,100,350,100);
				ctx.fillText(hand7,240,350,100);
				ctx.strokeText(hand7,240,350,100);

				ctx.fillText(innings8,10,400,100);
				ctx.strokeText(innings8,10,400,100);
				ctx.fillText(reliever2,100,400,100);
				ctx.strokeText(reliever2,100,400,100);
				ctx.fillText(hand8,240,400,100);
				ctx.strokeText(hand8,240,400,100);

				ctx.fillText(innings9,10,450,100);
				ctx.strokeText(innings9,10,450,100);
				ctx.fillText(reliever3,100,450,100);
				ctx.strokeText(reliever3,100,450,100);
				ctx.fillText(hand9,240,450,100);
				ctx.strokeText(hand9,240,450,100);

				var jpeg = canvas.toDataURL("image/jpeg");
			  　document.getElementById("newImg").src = jpeg;

			  	$('.save_button').css('display','block');
			}

						// canvas上のイメージを保存
				function saveCanvas(saveType, cvs, jpeg){
				    
				    var fileName = "order.jpeg";
				    var base64 = canvas.toDataURL("image/jpeg");
				    // base64データをblobに変換
				    var blob = Base64toBlob(base64);
				    // blobデータをa要素を使ってダウンロード
				    saveBlob(blob, fileName);
				}
				 
				// Base64データをBlobデータに変換
				function Base64toBlob(base64)
				{
				    // カンマで分割して以下のようにデータを分ける
				    // tmp[0] : データ形式（data:image/png;base64）
				    // tmp[1] : base64データ（iVBORw0k～）
				    var tmp = base64.split(',');
				    // base64データの文字列をデコード
				    var data = atob(tmp[1]);
				    // tmp[0]の文字列（data:image/png;base64）からコンテンツタイプ（image/png）部分を取得
					var mime = tmp[0].split(':')[1].split(';')[0];
				    //  1文字ごとにUTF-16コードを表す 0から65535 の整数を取得
					var buf = new Uint8Array(data.length);
					for (var i = 0; i < data.length; i++) {
				        buf[i] = data.charCodeAt(i);
				    }
				    // blobデータを作成
					var blob = new Blob([buf], { type: mime });
				    return blob;
				}
				 
				// 画像のダウンロード
				function saveBlob(blob, fileName)
				{
				    var url = (window.URL || window.webkitURL);
				    // ダウンロード用のURL作成
				    var dataUrl = url.createObjectURL(blob);
				    // イベント作成
				    var event = document.createEvent("MouseEvents");
				    event.initMouseEvent("click", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
				    // a要素を作成
				    var a = document.createElementNS("http://www.w3.org/1999/xhtml", "a");
				    // ダウンロード用のURLセット
				    a.href = dataUrl;
				    // ファイル名セット
				    a.download = fileName;
				    // イベントの発火
				    a.dispatchEvent(event);
				}
    	</script>    	
    </body>	
    <footer>
    	<Hr Size="1">
		<a href="https://twitter.com/yuyaokayama5516">お問い合わせ・ご要望はこちら（製作者Twitter：@YuyaOkayama5516）</a>
  		<p><small>&copy; copyright 2018 YuyaOkayama</small></p>
	</footer>
</html>